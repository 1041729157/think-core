<case value="ueditor">
    <div class="form-group item_{$[type]form.name} {$[type]form.extra_class}">
        <label class="left control-label">{$[type]form.title}：</label>
        <div class="right">
            <textarea id="[type]{$group_k}_ueditor_{$[type]k}" name="{$[type]form.name}"  {$[type]form.extra_attr}>
                {$[type]form.value}
            </textarea>
            <notdefined name="UEDITOR">
               <script type="text/javascript" charset="utf-8" src="__PUBLIC__/libs/ueditor/ueditor.config.js"></script>
               <script type="text/javascript" charset="utf-8" src="__PUBLIC__/libs/ueditor/ueditor.all.js"></script>
               <script type="text/javascript" charset="utf-8" src="__PUBLIC__/libs/ueditor/lang/zh-cn/zh-cn.js"></script>
                <script>
                    UE.plugins['forceCatchRemoteImg'] = function(){
                        if(this.options.forcecatchremote){
                            this.addListener("afterpaste", function (t,a) {
                                var load_src = '/Public/libs/ueditor/img/load.gif';
                                var domUtils = baidu.editor.dom.domUtils;

                                var parser=new DOMParser();
                                var pasteDom=parser.parseFromString(a.html,"text/html");

                                var allImgs = domUtils.getElementsByTagName(this.document, "img");
                                var imgs = domUtils.getElementsByTagName(pasteDom, "img");

                                for(var i=0; i<imgs.length;i++){
                                    if (imgs[i].src.indexOf(location.host) != -1 || /(^\.)|(^\/)/.test(imgs[i].src)) {
                                        continue
                                    }
                                    for(var l=0; l<allImgs.length;l++){
                                        if(allImgs[l].src == imgs[i].src){
                                            domUtils.setAttributes(allImgs[l], {
                                                "src": load_src,
                                                "_src": allImgs[l].src
                                            });
                                        }
                                    }
                                }

                                eventEmitter.trigger('startHandlePostData', '正在抓取图片');
                            });

                            this.addListener("catchremotesuccess", function(){
                                eventEmitter.trigger('endHandlePostData');
                            });
                        }

                    }
                </script>
                <define name="UEDITOR" value="1" />
            </notdefined>
            <script type="text/javascript">
                var url = $('#[type]{$group_k}_ueditor_{$[type]k}').data('url');
                var forcecatchremote = $('#[type]{$group_k}_ueditor_{$[type]k}').data('forcecatchremote');
                var opt = {};
                if(url){
                    opt['serverUrl'] = url;
                }

                if(forcecatchremote){
                    opt['forcecatchremote'] = forcecatchremote;
                }

                UE.getEditor('[type]{$group_k}_ueditor_{$[type]k}', opt);

            </script>
        </div>
    </div>
</case>
